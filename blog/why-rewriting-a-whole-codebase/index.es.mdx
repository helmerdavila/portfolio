---
title: 'Por qu√© rescribir todo el c√≥digo es la √∫ltima opci√≥n para mejorarlo'
description: Vamos a hacerlo desde cero solo muestra que eres Junior
date: 2023-03-20
published: true
image: ../../src/images/blog/construction-excavator.jpg
imageAlt: 'Photo by Tobias Kleeb on Unsplash'
tags: ['refactoring', 'legacy', 'rewrite']
---

# Por qu√© rescribir todo el c√≥digo es la √∫ltima opci√≥n para mejorarlo

## üíº Cuando un desarrollador entra a la empresa

Hay que empezar con un _mea culpa_. Yo fui as√≠ desde el principio. No estaba preparado para leer c√≥digo, quer√≠a utilizar los conocimientos que ya ten√≠a en X framework.

Despu√©s cuando pasa el tiempo, lo ves.

Vuelve a suceder.

El nuevo que entra a la compa√±ia donde tu trabajas y empieza a decir a los cuatro vientos:

- _Esto no sirve_
- _Hagamos esto desde cero_
- _El c√≥digo es una mierda_ (o variaciones: basura, horrible, spaghetti, etc).

Lo malo de esta idea, es que vas a tener que lidiar con algunas cosas:

- Bug existentes: El c√≥digo del cual te quejas, podr√≠a funcionar sobre ciertos bugs que, debido a los misterios del universo, hacen que el algoritmo ejecutado no se rompa. Los cuales vas a tener que replicar en la nueva rescritura, pues sino, el algoritmo puede tener comportamientos inesperados.
- N√∫meros m√°gicos: Ahora tienes que pensar que son y c√≥mo obtener esos valores m√°gicos escritos all√≠, pero ahora de manera din√°mica. Esto incrementa tus tiempos de desarrollo.
- Actualizar o crear tests: Cuando el c√≥digo se crea, no es simplemente mover las reglas. Depende si los tests ya fueron escritos, o si ahora tienes que actualizarlos para que puedan pasar. Y eso si es que fueron escritos. Porque, si no hay nada creado, ahora es tu responsabilidad hacerlo. Dentro de unos a√±os quieras o no tu c√≥digo ser√° _legacy_ de todos modos.

## üóëÔ∏è ¬øQu√© es mal c√≥digo?

Solemos decir mal c√≥digo al que no entendemos f√°cilmente. Esto es una mera impresi√≥n y subjetivo. Creo que una definici√≥n m√°s exacta ser√≠a:

Mal c√≥digo, es todo ese c√≥digo sobre el cual quieras a√±adir, actualizar o remover m√°s, habr√° una gran oportunidad de que falle debido a su mala legibilidad, organizaci√≥n o falta de pruebas.

Esto puede ser causado debido a dos razones:

### Infraingenier√≠a

Es la falta de ingenier√≠a o abstraci√≥n en los procesos. Suele identificarse porque gran parte de la l√≥gica de negocio se encuentra en unos diferentes lugares o en uno solo pero de manera desordenada. Tambi√©n se identifica por la repetici√≥n del c√≥digo.

He visto casos tambi√©n de n√∫meros m√°gicos, ID‚Äôs y contrase√±as escritos en el c√≥digo.

Para a√±adir m√°s salsa, los despliegues a producci√≥n podr√≠an ser manuales o tediosos.

Dentro de este grupo, he visto a varias startups o agencias de desarrollo. Donde lanzar features es la opci√≥n n√∫mero uno.

Y lo entiendo, obtener dinero es la prioridad.

Pero si est√°s perdido en el desierto, ¬øquieres construir tu hogar all√≠?. O, eventualmente buscar una soluci√≥n para salir.

### Sobreingenier√≠a

El lado opuesto de la infraingenier√≠a. Procesos a diestra y siniestra. Un mont√≥n de abstracci√≥n para procesos simples que extiende la creaci√≥n de nuevas reglas de negocio.

Aplicado por personas que escucharon las cinco √∫ltimas tecnolog√≠as en el √∫ltimo meetup de su ciudad, y quieren agregarlos a su producto actual.

Con casi 10 a√±os de experiencia, han habido tres a cuatro ocasiones importantes donde desde el d√≠a n√∫mero uno quieren crear una soluci√≥n _que escale_, cuando dentro del app s√≥lo est√°n registrados 2 inversores y la mam√° del CEO.

De todos modos, ac√° tres veces que recuerdo:

- _Usemos microservicios_: el equipo de desarrollo era de 3 personas y apenas ten√≠an 10 usuarios registrados.
- _Usemos Kubernetes,‚Äútenemos que escalar horizontal‚Äù:_ ECS con Balanceadores de carga funcionaba de maravillas. Pero los desarrolladores quer√≠an moverse a Kubernetes cuando nadie en el equipo pod√≠a fundamentar su uso.
- _Debemos separar el backend del frontend:_ Cuando han sido uno o dos desarrolladores encargados del proyecto. Muchos framework monol√≠ticos te permiten ya incluso separar ambos lados del desarrollo, backend y frontend, usando un mismo proyecto. Sin comprometer la seguridad o la velocidad de desarrollo. E incluso la integraci√≥n entre ambos es muy sencilla. Una excusa para no aprender cada desarrollador uno del otro lado de desarrollo, ya sea backend aprendiendo de frontend o un frontend aprendiendo de backend.

## üìà Los peligros de una tendencia

Si ves algo nuevo, √∫salo en un lugar donde no puedas da√±ar a nadie o que no retrace tu producto de cara al usuario.

Haz experimentos, juega con ella.

Pero no debe ser tu principal bloqueo.

No trates de usarlo sin antes haber experimentado.

Cuando dominas una herramienta, es mucho m√°s f√°cil recomendarla y mostrar los beneficios de ella.

S√© el pro de la herramienta, no el fan.

## üí° ¬øCu√°ndo se debe realizar desde cero?

Han sido pocas las ocasiones donde he visto que una proyecto se tenga que hacer REALMENTE desde cero. Han sido situaciones donde:

- El c√≥digo est√° en un lenguaje antiguo o es dificil conseguir desarrolladores expertos que puedan darle mantenimiento.
- Los equipos comienzan a crecer y se necesita hacer una separaci√≥n de dominio. Ej: un equipo de Autentificaci√≥n va a necesitar crear un microservicio que s√≥lo se encargue de registrar, loguear o actualizar la contrase√±a de los usuarios.

## ‚ôæÔ∏è C√≥mo evitar hacer todo desde cero: usando mejoras incrementales

Hay cuatro pasos que uso que pueden servirte tambi√©n para mejorar un proyecto. Las peque√±as mejores pueden ayudarte a lidiar con un c√≥digo _legacy_.

### Entender

El tiempo que uses en esta etapa depende de tu experiencia como desarrollador. Mientras m√°s c√≥digo hayas visto y entendido, tomar√° mucho menos de tu tiempo.

Lee y trata de entender el c√≥digo.

Usa un debugger, analiza las variables.

Escribe los procesos envueltos en un flujo, en un lenguaje que T√ö puedas entender y toma notas.

Habla con personas con m√°s experiencia que t√∫ y que hayan visto proyectos similares o que hayan vivido experiencias afines.

### Investigar y pensar

He puesto estos dos pasos en uno s√≥lo porque creo que se complementan uno con el otro.

Si te informas de patrones de programaci√≥n o de casos similares en distintos blogs o videos de Youtube, mucho mejor. Hay muchas personas que ya han vivido situaciones como la nuestra. Preguntar en foros o comunidades tambi√©n es una opci√≥n v√°lida.

Despu√©s toca pensar, c√≥mo puedes utilizar ese conocimiento para mejorar el c√≥digo. Aqu√≠ tambi√©n entra en juego la experiencia, y si no la tienes, la experimentaci√≥n que est√©s dispuesto a hacer.

### Planear

La transici√≥n desde pensar y planear es sutil. Tambi√©n suelen ir de la mano muchas veces.

Planear es crear un aproximado de cu√°nto y c√≥mo ser√° el esfuerzo para mejorar el proyecto.

Es muy sabido que como desarrolladores nosotros muchas veces no estimamos bien, para lo cual recomiendo: Si antes has sufrido de infra-estimaci√≥n. Agrega dos o tres veces el tiempo que piensas que te tomar√° y toma en nota cuanto tiempo realmente te tom√≥ al finalizar. As√≠ mas o menos tendr√°s un promedio de como trabajas, o tus compa√±eros si trabajas en equipo.

Ac√° tambi√©n entra en plan si usas _tests_ para comprobar si tu c√≥digo no fallar√°. Sino, tendr√°s que crearlos. Lo cual tambi√©n cuenta dentro de tu tiempo de desarrollo.

### Hacer y probar

Una vez que has creado tu plan, ¬°manos a la obra!. No olvides una vez finalizado la mejora de c√≥digo, que tus tests funcionen y que el cambio no tenga consecuencias negativas para tu usuario. Con mejoras incrementales tendr√°s un proyecto que a cualquier desarrollador le motivar√° trabajar.

## ‚úÖ Conclusi√≥n

Como a la mayor√≠a de preguntas en la vida la respuesta es ‚Äúdepende de tu situaci√≥n‚Äù. La experiencia es la que suele darte la intuici√≥n de que un proyecto necesita ser rescrito desde cero. O al menos separar una parte y rehacerla.

Siempre ten a tu lado el poder de la investigaci√≥n y pensamiento cr√≠tico.
