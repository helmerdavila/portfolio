---
title: 'CPanel: Obtener certificados SSL gratis (no root)'
description: Ya que algunos proveedores de almacenamiento compartido (hosting) te atan a venderte un certificado SSL.
date: 2022-05-01
published: true
image: ../../src/images/blog/keys.jpg
tags: ['cpanel', 'ssl', 'sharedhosting']
---

# CPanel: Obtener certificados SSL gratis (no root)

Ya que algunos proveedores de almacenamiento compartido (hosting) te atan a venderte un certificado SSL. Con la ayuda del script `acme.sh`, puedes obtener certificados SSL gratis siguiendo estas instrucciones:

## ğŸ“ˆ Ve a la terminal en tu CPanel o conÃ©ctate con SSH

![Cpanel](./cpanel.png)

## â¬‡ï¸ Descarga el script [acme.sh](http://acme.sh/)

```bash
curl https://get.acme.sh | sh
```

## ğŸ”ƒ Refresca la terminal

Sal y vuelve a entrar a la terminal o simplemente ejecuta

```bash
source ~/.bashrc
```

## âœ‰ï¸ Registra el certificado con tu correo electrÃ³nico

```bash
acme.sh â€”-register-account â€”-accountemail youremail@yourdomain.com
```

## â° Comprueba si el cronjob fue habilitado por acme

```bash
crontab -l | grep acme.sh
```

Este comando deberÃ­a mostrar algo como esto:

```bash
10 0 * * * â€œ/home/*YOUR_CPANEL_USER*/.acme.shâ€/acme.sh â€”- cron â€”- home â€œ/home/*YOUR_CPANEL_USER*/.acme.shâ€ > /dev/null
```

## ğŸ“¦ Configura las variables del dominio en la terminal

```bash
export DOMAIN=yourdomain.com
# Presiona enter y despuÃ©s escribe
export WWWDOMAIN=www.yourdomain.com
# No te olvides de presionar enter nuevamente
```

## ğŸ”‘ Comprueba si la generaciÃ³n de certificado funcionÃ³

Before testing if generate the certificate is allowed. You need the path of the domain / subdomain from your Cpanel. Execute the following command and youâ€™ll get the path

Antes de comprobar si la generaciÃ³n de certificados es permitida. Necesitas el directorio del dominio / subdominio de tu CPanel. Ejecuta el siguiente comando y obtendrÃ¡s el directorio.

```bash
export DOMAINPATH=$(uapi DomainInfo single_domain_data domain=$DOMAIN | grep documentroot| cut -d " " -f 6)
```

El resultado se almacenarÃ¡ en **DOMAINPATH**

DespuÃ©s, puedes usar Acme para generar un certificado de **STAGING**

```bash
acme.sh â€”-issue â€”-webroot ${DOMAINPATH} -d ${DOMAIN} -d ${WWWDOMAIN} â€”-staging
```

> SÃ³lo agregar `-d $WWWDOMAIN`, si estÃ¡s usando un alias `www` en tu dominio.

Si recibes mensajes o checks de color verde. Â¡Felicidades! Ya puedes generar certificados en tu cuenta CPanel.

## ğŸ„ Genera un certificado SSL real

```bash
acme.sh â€”-issue â€”-webroot ${DOMAINPATH} -d ${DOMAIN} -d ${WWWDOMAIN} â€”-force
```

## â• Agrega tu certificado a CPanel

```bash
acme.sh â€”-deploy â€”-deploy-hook cpanel_uapi â€”-domain ${DOMAIN} --domain ${WWWDOMAIN}
```

> Recuerda, necesitarÃ¡s repetir cada paso desde â€œConfigura las variables del dominio en la terminalâ€ en adelante por cada dominio / subdominio cuando quieras agregarlo.
