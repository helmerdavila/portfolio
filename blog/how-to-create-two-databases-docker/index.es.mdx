---
title: 'Docker MySQL - C칩mo crear dos bases de datos dentro del mismo contenedor'
description: Solo quer칤a no contaminar mi base de datos dentro de Docker con un mont칩n de nombres falsos o contenido de Lorem Ipsum
date: 2023-03-26
image: ../../src/images/blog/containers-many.jpg
imageAlt: Photo by Timelab on Unsplash
published: true
tags: ['docker', 'mysql', 'database', 'docker-compose']
---

# Docker MySQL - C칩mo crear dos bases de datos dentro del mismo contenedor

## 游뱂 쯇or qu칠?

Ya estaba cansado.

Solo quer칤a no contaminar mi base de datos dentro de Docker con un mont칩n de nombres falsos o contenido de Lorem Ipsum. Porque cuando quiero listar todos los registros o fotos en mi aplicaci칩n actual, quiero los originales, para la presentaci칩n al cliente.

Adem치s, quer칤a una base de datos adicional, donde si mis migraciones fallan, pueda volver atr치s f치cilmente. O destruir la base de datos y crearla de nuevo, sin ejecutar _seeders_ o usar una copia de seguridad con datos casi reales.

Muchos _frameworks_ tienen un enfoque diferente para esto. Ejecutar pruebas dentro de transacciones, post-limpieza, etc.

Pero no quiero aprender una manera independiente de acuerdo al _framework_ en el que voy a trabajar.

Se me ocurri칩 una forma m치s simple.

쯈u칠 pasa si creo una segunda base de datos en el contenedor? Mejor a칰n, 춰de forma autom치tica!

## 游댣 쮺칩mo?

Para demostrar que no uso IA para generar contenido formal en mis publicaciones, utilizar칠 `potato` (patata, papa) como nombre de proyecto en este tutorial.

En primer lugar, crea una carpeta donde quieras almacenar los scripts. Para este tutorial, la llamaremos `dockerdb_init`. Luego, crea un archivo llamado `create_test_database.sql` con el siguiente contenido:

> Docker solo crea una base de datos con las variables de entorno escritas. Dado que el proyecto utilizar치 una base de datos de prueba, este script agregar치 un sufijo _test_.

```sql
CREATE DATABASE IF NOT EXISTS `potato_db_test`;
GRANT ALL ON `potato_db_test`.* TO 'potato_db_user'@'%'
```

Si est치s usando `docker-compose.yml`, esta es la especificaci칩n para el contenedor.

```yaml
db:
  container_name: potato_db
  image: 'mysql:8.0'
  volumes:
    - './dockerdb:/var/lib/mysql'
    - './dockerdb_init:/docker-entrypoint-initdb.d'
  env_file:
    - .env
  ports:
    - '3306:3306'
```

Ya que prefiero mantener mis variables de entorno en un archivo separado, puedes colocar el siguiente contenido en tu archivo `.env`:

```bash
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=potato_db
MYSQL_USER=potato_db_user
MYSQL_PASSWORD=potato_db_pass
```

La primera vez que se ejecute el contenedor, se ejecutar치 el script y ahora tendr치s dos bases de datos: `potato_db` y `potato_db_test`.
