---
title: 'Gatsby: colorizar c贸digo usando react-prism-renderer'
description: Para diferentes lenguajes de programaci贸n
date: 2022-08-03
published: true
image: ../../src/images/blog/code-block-green.jpg
tags: ['gatsby', 'javascript', 'typescript', 'react']
---

# Gatsby: colorizar c贸digo usando react-prism-renderer

Escribo tutoriales de programaci贸n para distintos lenguajes.

Como yo uso Gatsby, para tener c贸digo colorido utilizo `react-prism-renderer`. Es un buen plugin para hacerlo. Por defecto, viene con una gran variedad de lenguajes de programaci贸n activados. Este es el componente que uso para mostrar mis snippets de c贸digo en mi blog.

Pero cuando estaba escribiendo unos bloques de c贸digo, vi que algunos lenguajes no estaban colorizados por defecto. 驴Qu茅 estaba pasando?

## П Mi componente para colorear el c贸digo

Tras el tel贸n. React prism renderer utiliza PrismJS, y podemos utilizarlo para nuestro beneficio. Necesitamos importar el lenguaje que necesitemos para agregarle soporte.

Aqu铆 est谩 el c贸digo. Con este _snippet_, podemos crear un componente React en Gatsby. Pon atenci贸n a las l铆neas con `require`.

```tsx
import React, { ReactElement, useContext } from 'react';
import Highlight, { defaultProps, Language } from 'prism-react-renderer';
// Cargando los temas para Prism
import nightOwlNight from 'prism-react-renderer/themes/nightOwlLight';
import nightOwl from 'prism-react-renderer/themes/nightOwl';
import Prism from 'prism-react-renderer/prism';
// Un archivo personal con temas claro / oscuro para mi blog, puedes remover esto y sus referencias
import { ThemeContext } from '../Layout';

// Ac谩 importamos los lenguajes que necesitamos
require('prismjs/components/prism-php');
require('prismjs/components/prism-ruby');
require('prismjs/components/prism-yaml');
require('prismjs/components/prism-docker');
require('prismjs/components/prism-bash');
require('prismjs/components/prism-ignore');

interface Props {
  children?: string;
  className: string;
}

const Code = ({ children, className }: Props): ReactElement => {
  const context = useContext(ThemeContext);
  const language = (className.replace(/language-/, '') || '') as Language;

  return (
    <Highlight
      {...defaultProps}
      theme={context.isLightTheme ? nightOwlNight : nightOwl}
      code={children}
      language={language}
    >
      {({ className, style, tokens, getLineProps, getTokenProps }) => (
        <pre className={`${className} overflow-x-auto`} data-testid="code-highlight" style={{ ...style }}>
          {tokens.map((line, index) => {
            const lineProps = getLineProps({ line, key: index });
            return (
              <div key={index} {...lineProps}>
                {line.map((token, key) => (
                  <span key={key} {...getTokenProps({ token, key })} />
                ))}
              </div>
            );
          })}
        </pre>
      )}
    </Highlight>
  );
};

export default Code;
```

Entonces, si est谩s usando MDX o algo similar para crear tus p谩ginas. Puedes usar el componente de la siguiente manera.

```tsx
import { MDXProvider } from '@mdx-js/react';
import { MDXRenderer } from 'gatsby-plugin-mdx';
import Code from '../components/Mdx/Code'; // El componente que creamos antes

const MyCode = (props: { children: string; className: string }) => <Code {...props} />;

<MDXProvider components={{ code: MyCode }}>
  <MDXRenderer>{mdx.body}</MDXRenderer>
</MDXProvider>;
```

Ahora todas tus etiquetas HTML `<code>` tendr谩n el c贸digo con color.

##  Explicando el c贸digo

El componente `<Highlight/>` es usado por React Prism Renderer para a帽adir color a la s铆ntaxis del c贸digo, como puedes ver en el ejemplo arriba.

Algunos lenguajes tendr谩n que ser agregados expl铆citamente. Esto est谩 hecho a prop贸sito para cargar s贸lo lo necesario. Recomiendo visitar tu carpeta `/node_modules/prismjs/components/` para m谩s informaci贸n.

```tsx
// Aqu铆 es donde importamos los lenguajes que necesitamos
require('prismjs/components/prism-php');
require('prismjs/components/prism-ruby');
require('prismjs/components/prism-yaml');
require('prismjs/components/prism-docker');
require('prismjs/components/prism-bash');
require('prismjs/components/prism-ignore');
```

> Enlace original de la respuesta donde se agregan m谩s lenguajes: [_aqu铆_](https://github.com/FormidableLabs/prism-react-renderer/issues/53) . Este tutorial es una extensi贸n a esa respuesta.

> El c贸digo de este ejemplo puede estar desactualizado cuando lo leas. Siempre echa un vistazo a la 煤ltima versi贸n [_aqu铆_](https://github.com/helmerdavila/portfolio/blob/main/src/components/Mdx/Code.tsx)
