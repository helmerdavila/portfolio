---
title: 'Gatsby: Colorier la syntaxe avec react-prism-renderer'
description: Pour les diffÃ©rents langages de programmation
date: 2022-08-03
published: true
image: ../../src/images/blog/code-block-green.jpg
---

Jâ€™Ã©cris des tutoriels pour des langages de programmation diffÃ©rentes.

Comme jâ€™utilise Gatsby, pour montrer de code colorÃ©, on peut employer `react-prism-renderer` . Câ€™est un bon plugiciel pour le faire. Par dÃ©faut, il vient avec une grande variÃ©tÃ© de _coding languages_ actifs. Câ€™est mon composant pour enseigner mes \*snippets **\***de code dans mon blogue.

Mais quand jâ€™Ã©crivais des blocs de code, certains nâ€™Ã©taient pas colorÃ©s. Quâ€™est-ce qui est passÃ©?

## ðŸ§±Â Mon composant pour colorer le code

React prism renderer utilise PrismJS, et on peut le profiter. On doit importer le langage quâ€™on a besoin de colorer.

Ceci le code. Avec ce snippet, on peut crÃ©er un composant React dans Gatsby. Faire attention des lignes avec `require`.

```tsx
import React, { useContext } from 'react';
import Highlight, { defaultProps, Language } from 'prism-react-renderer';
// Ajouter des thÃ¨mes pour Prism
import nightOwlNight from 'prism-react-renderer/themes/nightOwlLight';
import nightOwl from 'prism-react-renderer/themes/nightOwl';
import Prism from 'prism-react-renderer/prism';
// Un fichier personnel pour valider le mode clair ou obscur dans mon blogue, tu peux le supprimer
import { ThemeContext } from '../Layout';

// On va importer les langages dont on a besoin
require('prismjs/components/prism-php');
require('prismjs/components/prism-ruby');
require('prismjs/components/prism-yaml');
require('prismjs/components/prism-docker');
require('prismjs/components/prism-bash');
require('prismjs/components/prism-ignore');

interface Props {
  children?: string;
  className: string;
}

const Code = ({ children, className }: Props): JSX.Element => {
  const context = useContext(ThemeContext);
  const language = (className.replace(/language-/, '') || '') as Language;

  return (
    <Highlight
      {...defaultProps}
      theme={context.isLightTheme ? nightOwlNight : nightOwl}
      code={children}
      language={language}
    >
      {({ className, style, tokens, getLineProps, getTokenProps }) => (
        <pre className={`${className} overflow-x-auto`} data-testid="code-highlight" style={{ ...style }}>
          {tokens.map((line, index) => {
            const lineProps = getLineProps({ line, key: index });
            return (
              <div key={index} {...lineProps}>
                {line.map((token, key) => (
                  <span key={key} {...getTokenProps({ token, key })} />
                ))}
              </div>
            );
          })}
        </pre>
      )}
    </Highlight>
  );
};

export default Code;
```

Donc, si tu utilises MDX ou similaires pour crÃ©er tes pages. Tu peux Ã©crire le composant comme suit.

```tsx
import { MDXProvider } from '@mdx-js/react';
import { MDXRenderer } from 'gatsby-plugin-mdx';
import Code from '../components/Mdx/Code'; // Le composant qu'on a crÃ©e

const MyCode = (props: { children: string; className: string }) => <Code {...props} />;

<MDXProvider components={{ code: MyCode }}>
  <MDXRenderer>{mdx.body}</MDXRenderer>
</MDXProvider>;
```

Et puis, toutes tes balises HTML `<code>` auront son code colorÃ©

## ðŸŽ™ Quâ€™est-ce que ce code fait?

Le composant `<Highlight/>` est utilisÃ© par React Prism Renderer pour ajouter de la couleur Ã  la syntaxe du code.

Certains langages devront Ãªtre ajoutÃ©es explicitement. Je recommande de vÃ©rifier le dossier `/node_modules/prismjs/components/` pour plus dâ€™information.

```tsx
require('prismjs/components/prism-php');
require('prismjs/components/prism-ruby');
require('prismjs/components/prism-yaml');
require('prismjs/components/prism-docker');
require('prismjs/components/prism-bash');
require('prismjs/components/prism-ignore');
```

> Le lien originel dont jâ€™ai pris la solution: [_ici_](https://github.com/FormidableLabs/prism-react-renderer/issues/53) . Ce tutoriel Ã©largit cette rÃ©ponse.

> Le code dâ€™exemple pour Ãªtre obsolÃ¨te dans le futur. Jette un coup dâ€™Å“il Ã  mon composant [_ici_](https://github.com/helmerdavila/portfolio/blob/main/src/components/Mdx/Code.tsx).
